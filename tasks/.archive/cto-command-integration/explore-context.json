{
  "feature_name": "cto-command-integration",
  "generated_at": "2026-02-10T12:00:00Z",
  "file_location": "/tasks/cto-command-integration/explore-context.json",
  "similar_features": [],
  "applicable_patterns": [
    {
      "pattern": "Agent file reference (personality overlay)",
      "file": ".claude/agents/cto.md",
      "usage": "Commands read agent file at startup and adopt decision-making framework. New pattern for fat-controller."
    },
    {
      "pattern": "Task tool subagent invocation",
      "file": ".claude/commands/execute.md",
      "usage": "Existing pattern for invoking CTO-advisor via Task(subagent_type='cto-technical-advisor')"
    },
    {
      "pattern": "Decision Authority section",
      "file": ".claude/commands/execute.md",
      "usage": "New standardised section format across commands defining CTO decides vs escalates"
    }
  ],
  "key_files": [
    {"path": "~/.claude/agents/cto.md", "purpose": "Source CTO agent file (user-level, 143 lines) - to be copied to project"},
    {"path": ".claude/agents/cto.md", "purpose": "Target CTO agent file (new, project-level copy)"},
    {"path": ".claude/agents/cto-technical-advisor.md:1-119", "purpose": "Advisor agent to update with CTO relationship + values alignment"},
    {"path": ".claude/commands/execute.md:11-97", "purpose": "Orchestrator philosophy section - add CTO personality, update line 24"},
    {"path": ".claude/commands/execute.md:1417-1469", "purpose": "Post-execution steps - add CTO triage + task completion review"},
    {"path": ".claude/commands/prd.md:139-300", "purpose": "Questioning process - CTO makes architectural decisions"},
    {"path": ".claude/commands/bugs.md:238-289", "purpose": "Three-tier decision section - CTO validates and decides"},
    {"path": ".claude/commands/feature.md:215-262", "purpose": "Complexity assessment and tier decision - CTO validates and decides"}
  ],
  "integration_points": [
    {"system": ".claude/agents/cto.md", "connection": "Read by all 4 commands at startup for personality overlay"},
    {"system": ".claude/agents/cto-technical-advisor.md", "connection": "Invoked by execute.md via Task tool for post-code-review task completion review"},
    {"system": "Task tool", "connection": "Existing mechanism for invoking CTO-advisor as subagent"},
    {"system": "execution-agent", "connection": "Spawned by CTO-orchestrator for fix tasks after code review triage"}
  ],
  "downstream_effects": [
    {"file": ".claude/commands/execute.md:24", "impact": "Line changes from 'DO NOT make implementation decisions' to allow CTO-level architectural decisions", "likelihood": "HIGH"},
    {"file": ".claude/commands/execute.md:1455-1466", "impact": "Code review failure handling replaced with CTO-driven autonomous triage", "likelihood": "HIGH"},
    {"file": ".claude/commands/prd.md", "impact": "Architectural questions in rounds 2+ become CTO decisions instead of user questions", "likelihood": "HIGH"},
    {"file": ".claude/commands/bugs.md", "impact": "Phase 5 tier decisions made by CTO instead of presented to user", "likelihood": "MEDIUM"},
    {"file": ".claude/commands/feature.md", "impact": "Phase 5 tier decisions made by CTO instead of presented to user", "likelihood": "MEDIUM"}
  ],
  "red_flags": [
    {"issue": "execute.md prompt length (~1600 lines + ~100 lines CTO additions)", "severity": "MEDIUM"},
    {"issue": "Wrong CTO architectural decisions in PRD propagate through execution lifecycle", "severity": "MEDIUM"},
    {"issue": "Two CTO agents (cto vs cto-technical-advisor) could confuse users", "severity": "MEDIUM"}
  ]
}
