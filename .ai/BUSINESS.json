{
  "meta": {
    "projectName": "fat-controller",
    "version": "3.3.1",
    "lastUpdated": "2026-02-14",
    "description": "Business logic, feature specifications, and product requirements"
  },
  "features": {
    "_comment": "Track all features and their status",
    "authorityBasedMemorySystem": {
      "status": "complete",
      "version": "v3.0.0",
      "description": "Single source of truth memory system with automated capture",
      "keyComponents": [
        "QUICK.md router with authority map",
        "OPS.md, CONSTRAINTS.md, DEPRECATIONS.md, TECH_DEBT.md authoritative files",
        "decisions/ and solutions/ directories",
        "Codex validation integration",
        "Automated capture in commands"
      ]
    },
    "codexIntegration": {
      "status": "complete",
      "version": "v3.1.3",
      "description": "Codex CLI integration for code review, validation, and dual-model orchestration",
      "keyComponents": [
        "Three-tier execution (Codex xhigh → Sonnet → Codex medium)",
        ".codex/prompts/code-review.md",
        "Authority rule validation",
        "Automated tech debt capture",
        "Dual-model code review (Claude + Codex parallel)",
        "Finding merge and deduplication",
        "User triage loop for MEDIUM/LOW findings"
      ]
    },
    "automatedKnowledgeCapture": {
      "status": "complete",
      "version": "v3.1.3",
      "description": "Commands automatically capture decisions, solutions, deprecations, tech debt with model attribution",
      "keyComponents": [
        "/prd → decisions/*.md",
        "/bugs → solutions/*.yaml",
        "/execute → solutions/*.yaml, decisions/*.md, DEPRECATIONS.md",
        "/code-review → TECH_DEBT.md with source attribution (Claude only|Codex only|Both)"
      ]
    },
    "templateSeparation": {
      "status": "complete",
      "version": "v3.1.0",
      "description": "Template system for project bootstrap - see ARCHITECTURE.json for technical pattern",
      "keyComponents": [
        "templates/.ai/ - pristine starter files with examples",
        ".ai/ - active project memory",
        "/pull-fc syncs templates/ from fat-controller",
        "Bootstrap process copies templates/ to .ai/"
      ]
    },
    "threeTierModelSelection": {
      "status": "complete",
      "version": "v3.1.0",
      "description": "Optimized model selection based on task complexity and reasoning effort",
      "keyComponents": [
        "Codex (gpt-5.2-codex, medium) for complexity 1-2",
        "Sonnet for complexity 3",
        "Codex (gpt-5.2-codex, xhigh) for complexity 4-5",
        "Reasoning effort controlled via -c flag, not model switching"
      ]
    },
    "downstreamEffectsAnalysis": {
      "status": "complete",
      "version": "v3.1.2",
      "description": "Commands analyze ripple effects of changes before implementation",
      "keyComponents": [
        "/bugs command maps what breaks when fixing root cause",
        "/feature command identifies consumers/dependents of changed files/APIs",
        "/prd command includes downstream effects in exploration",
        "Downstream effects include file:line, impact, and likelihood (HIGH/MEDIUM/LOW)",
        "Helps prevent unintended consequences of code changes"
      ]
    },
    "debateOrchestration": {
      "status": "complete",
      "version": "v3.1.2",
      "description": "Multi-model debate system for holistic decision analysis",
      "keyComponents": [
        "/debate command orchestrates Claude + Codex analysis",
        "3-round structured debate with cross-examination",
        "Parallel Round 1 (independent positions), sequential Rounds 2-3 (cross-examination)",
        "Synthesis phase produces consensus, divergences, and actionable recommendations",
        "Outputs to debates/ directory with brief.md, state.md, debate.md"
      ]
    },
    "dualModelCodeReview": {
      "status": "complete",
      "version": "v3.1.3",
      "description": "Parallel Claude and Codex code review with finding merge, deduplication, and user triage",
      "keyComponents": [
        "Parallel model spawning (Claude Opus via Task, Codex via Bash)",
        "Standardized JSON output schema for both models",
        "Hash-based finding deduplication",
        "Convergent vs single-model confidence tagging",
        "User triage loop for MEDIUM/LOW findings",
        "Source attribution in TECH_DEBT.md",
        "Fallback to Claude-only on Codex failure",
        "--codex-only flag for legacy single-model mode"
      ]
    },
    "ctoCommandIntegration": {
      "status": "complete",
      "version": "v3.2.0",
      "description": "CTO personality overlay for autonomous technical decision-making across commands",
      "keyComponents": [
        "CTO agent file (.claude/agents/cto.md) with values and decision criteria",
        "CTO-technical-advisor dual-mode output (briefing vs full advisory)",
        "Decision Authority sections in prd.md, bugs.md, feature.md, execute.md",
        "Autonomous code review triage by CTO-orchestrator",
        "CTO-advisor task completion review post-execution",
        "9-step post-execution flow (code review → triage → fixes → advisor → memory)",
        "STATE.md audit trail for all CTO triage decisions"
      ]
    },
    "codex53Migration": {
      "status": "complete",
      "version": "v3.2.0",
      "description": "Unified Codex 5.3 execution for all complexity levels",
      "keyComponents": [
        "Codex 5.3 (gpt-5.3-codex) for all tasks (complexity 1-5)",
        "Medium reasoning effort for complexity 1-3",
        "Xhigh reasoning effort for complexity 4-5",
        "50% token reduction vs prior Codex versions",
        "25% faster execution",
        "Eliminated Sonnet tier (replaced with Codex 5.3)"
      ]
    },
    "autonomousOrchestration": {
      "status": "complete",
      "version": "v3.3.0",
      "description": "Python orchestrator for autonomous PM-PL execution cycles",
      "keyComponents": [
        "orchestrator.py - Python 3 stdlib orchestrator",
        "PM agent (.claude/agents/pm.md) - Sprint planning",
        "PL agent (.claude/agents/pl.md) - Sprint execution",
        "ROADMAP.md template - Sprint state tracking",
        "YAML signal protocol for orchestrator-agent communication",
        "Git branch management (sprint/* branches)",
        "Parallel PL execution for independent sprints",
        "Two-phase merge with conflict detection"
      ]
    },
    "valuesDrivenAgents": {
      "status": "complete",
      "version": "v3.3.0",
      "description": "Agents load ~/.claude/VALUES.md for personalized decision-making with graceful degradation",
      "keyComponents": [
        "VALUES.md loading in cto.md, pm.md, pl.md",
        "Graduated warning flow (check → recommend → confirm → confirm again → proceed)",
        "Generic mode fallback (conservative judgments, ~60% confidence threshold)",
        "/values-discovery and /domain-values commands",
        "No gatekeeping: agents proceed in generic mode if VALUES.md missing"
      ]
    },
    "orchestrateCommand": {
      "status": "complete",
      "version": "v3.3.1",
      "description": "Launch orchestrator in tmux background session with pre-flight checks and UX flow",
      "keyComponents": [
        "/orchestrate command with 4-step pre-flight (git, OUTCOMES.md, VALUES.md, tmux session)",
        "Tmux background session survives Claude Code context exhaustion",
        "Graduated VALUES.md warning (recommend /values-discovery, allow proceed)",
        "Session management (attach/kill/cancel for existing sessions)",
        "Log to tasks/orchestrator.log",
        "Remain in Claude Code session after launch (do NOT end conversation)"
      ]
    },
    "outcomesCommand": {
      "status": "complete",
      "version": "v3.3.1",
      "description": "Interactive outcome discovery and project state file initialization",
      "keyComponents": [
        "/outcomes command with idempotency gate (review/fresh/cancel)",
        "Multi-round discovery (open context → extract outcomes → refine)",
        "Stopping criteria (measurable, no contradictions, constraints explicit)",
        "Confirmation before file creation",
        "Create OUTCOMES.md, PROJECT_STATE.md, DECISIONS.md",
        "Optional Project Lead section in CLAUDE.md",
        "Offer to run /orchestrate after completion"
      ]
    },
    "_example": {
      "status": "complete / in-progress / planned",
      "version": "v1.0",
      "description": "Brief feature description",
      "keyComponents": ["Component1", "Component2", "Component3"]
    }
  },
  "businessRules": {
    "_comment": "Document key business logic and validation rules",
    "_example": {
      "rules": [
        "Rule 1: Description",
        "Rule 2: Description",
        "Rule 3: Description"
      ],
      "exceptions": ["Exception case 1"]
    }
  },
  "userFlows": {
    "_comment": "Map critical user workflows",
    "_example": {
      "name": "Example user flow",
      "steps": [
        "Step 1",
        "Step 2",
        "Step 3",
        "Step 4"
      ],
      "keyScreens": ["Screen1", "Screen2", "Screen3"],
      "keyFiles": ["Service.ext", "Component.ext"]
    }
  },
  "performanceTargets": {
    "_comment": "Document performance requirements and measurements",
    "_example": {
      "target": "< 200ms",
      "measured": "150ms average",
      "critical": true
    }
  },
  "dataModels": {
    "_comment": "Document key data structures, relationships, and constraints",
    "_example": {
      "entities": {
        "User": {
          "fields": ["id", "email", "createdAt"],
          "required": ["email"]
        },
        "Order": {
          "fields": ["id", "userId", "status", "total"],
          "required": ["userId", "status"]
        }
      },
      "relationships": [
        "User has many Orders (User.id -> Order.userId)",
        "Order belongs to User"
      ],
      "constraints": [
        "User.email must be unique",
        "Order.total must be >= 0"
      ]
    }
  },
  "security": {
    "_comment": "Document security requirements and implementation",
    "_example": {
      "authentication": "JWT / OAuth / Session-based",
      "authorization": "Role-based / Permission-based",
      "dataProtection": "Encryption strategy"
    }
  }
}
